# Crypto-Analyzer config: DB, table, filters, and analysis defaults.
# Override with environment variables: CRYPTO_DB_PATH, CRYPTO_TABLE, etc. (see config.py).

db:
  path: "dex_data.sqlite"
  table: "sol_monitor_snapshots"
  price_column: "dex_price_usd"   # use "price_usd" for generic snapshots table
  timezone: "UTC"

# Default resample frequency and rolling window for analysis/backtest
defaults:
  freq: "5min"       # 5min, 15min, 1h, 1D
  window: 288        # rolling vol window in bars (288 x 5min = 1 day)

# Quality filters: exclude low-liquidity / low-volume pairs
filters:
  min_liquidity_usd: 250000
  min_vol_h24: 500000
  min_bars: 48       # minimum bars per pair (e.g. 48 for 1h = 2 days)
  exclude_stable_pairs: true   # exclude USDC/USDT etc. from mover scans

# Bars materialization: which frequencies to build
bars_freqs:
  - "5min"
  - "15min"
  - "1h"
  - "1D"

# Market factor for beta/correlation (if no BTC pair in data, load from spot_price_snapshots)
factor_symbol: "BTC"

# Provider chain configuration (ordered by priority â€” first healthy provider wins)
# To add a new provider: implement the SpotPriceProvider or DexSnapshotProvider protocol,
# register it in crypto_analyzer/providers/defaults.py, and add its name here.
providers:
  spot_priority: ["coinbase", "kraken"]
  dex_priority: ["dexscreener"]

# DEX pairs to poll each cycle (dex_poll_to_sqlite.py). Each: chain_id, pair_address, label (optional).
# If missing or empty, poller falls back to single hard-coded SOL/USDC pair.
# pairs:
#   - chain_id: solana
#     pair_address: "Czfq3xZZDmsdGdUyrNLtRhGc47cXcZtLG4crryfu44zE"
#     label: SOL/USDC
#   - chain_id: solana
#     pair_address: "<WETH_USDC_POOL_ADDRESS>"
#     label: WETH/USDC
#   - chain_id: solana
#     pair_address: "<WBTC_USDC_POOL_ADDRESS>"
#     label: WBTC/USDC

# Universe mode (dex_poll_to_sqlite.py --universe top): fetch top pairs from Dexscreener by chain
universe:
  enabled: false
  chain_id: solana
  page_size: 50
  refresh_minutes: 60
  min_liquidity_usd: 250000
  min_vol_h24: 500000
  queries: ["USDC", "USDT", "SOL", "SOL/USDC", "orca"]
  quote_allowlist: ["USDC", "USDT"]
  reject_same_symbol: true
  reject_stable_stable: true
  max_churn_pct: 0.20
  min_persistence_refreshes: 2   # require pair to fail selection K refreshes before removal (0 = disable)
  # bootstrap_pairs: optional list when API returns 0; each: chain_id, pair_address, label
  # bootstrap_pairs:
  #   - chain_id: solana
  #     pair_address: "Czfq3xZZDmsdGdUyrNLtRhGc47cXcZtLG4crryfu44zE"
  #     label: SOL/USDC
