<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1439px" preserveAspectRatio="none" style="width:379px;height:1439px;background:#FFFFFF;" version="1.1" viewBox="0 0 379 1439" width="379px" zoomAndPan="magnify"><title>Pipeline Overview &#8212; Four Stages + Phase 3 Opt-in (ebb8e37)</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="336.9297" x="20" y="34.5332">Pipeline Overview &#8212; Four Stages + Phase 3 Opt-in</text></g><rect fill="none" height="298.0781" style="stroke:#000000;stroke-width:1.5;" width="284.8105" x="43.7261" y="49.6094"/><path d="M110.5464,49.6094 L110.5464,60.2188 L100.5464,70.2188 L43.7261,70.2188" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.8203" x="46.7261" y="65.1426">Ingestion</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="144.7168" x="113.7729" y="80.2188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124.7168" x="123.7729" y="102.6758">cli/poll (ingest API only)</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="264.8105" x="53.7261" y="135.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="244.8105" x="63.7261" y="157.7695">get_poll_context &#8594; run_migrations (core + v2)</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="216.7813" x="77.7407" y="190.4063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="196.7813" x="87.7407" y="212.8633">SpotPriceChain / DexSnapshotChain</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="228.4473" x="71.9077" y="245.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="208.4473" x="81.9077" y="267.957">DbWriter &#8594; snapshots, provider_health</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="204.0781" x="84.0923" y="300.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184.0781" x="94.0923" y="323.0508">universe_allowlist (universe mode)</text><rect fill="none" height="317.9961" style="stroke:#000000;stroke-width:1.5;" width="260.4258" x="61.9185" y="357.6875"/><path d="M162.1802,357.6875 L162.1802,368.2969 L152.1802,378.2969 L61.9185,378.2969" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.2617" x="64.9185" y="373.2207">Materialization</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="153.7637" x="109.2495" y="395.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133.7637" x="119.2495" y="417.7539">Bar builder &#8594; bars_{freq}</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="224.7559" x="73.7534" y="450.3906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="204.7559" x="83.7534" y="472.8477">factor_materialize (factor_model_runs,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="162.75" x="83.7534" y="487.9414">factor_betas, residual_returns)</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="208.4258" x="81.9185" y="569.4961"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="188.4258" x="91.9185" y="591.9531">regime_materialize &#8594; regime_runs,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75.3691" x="91.9185" y="607.0469">regime_states</text><polygon fill="#F1F1F1" points="141.7876,520.5781,230.4751,520.5781,242.4751,532.5781,230.4751,544.5781,141.7876,544.5781,129.7876,532.5781,141.7876,520.5781" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17.1177" x="190.1313" y="555.9971">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88.6875" x="141.7876" y="537.0791">Phase 3 enabled?</text><polygon fill="#F1F1F1" points="186.1313,639.6836,198.1313,651.6836,186.1313,663.6836,174.1313,651.6836,186.1313,639.6836" style="stroke:#181818;stroke-width:0.5;"/><rect fill="none" height="249.9844" style="stroke:#000000;stroke-width:1.5;" width="252.7598" x="59.7515" y="685.6836"/><path d="M126.5649,685.6836 L126.5649,696.293 L116.5649,706.293 L59.7515,706.293" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.8135" x="62.7515" y="701.2168">Modeling</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="195.4121" x="88.4253" y="723.293"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="175.4121" x="98.4253" y="745.75">data / features / factors / regimes</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="176.7324" x="97.7651" y="778.3867"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156.7324" x="107.7651" y="800.8438">signals, cs_factors, cs_model</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="232.7598" x="69.7515" y="833.4805"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="212.7598" x="79.7515" y="855.9375">optimizer, walk_forward, execution_cost</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="128.0352" x="122.1138" y="888.5742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108.0352" x="132.1138" y="911.0313">experiments registry</text><rect fill="none" height="483.2773" style="stroke:#000000;stroke-width:1.5;" width="301.1436" x="39.3931" y="945.668"/><path d="M127.9995,945.668 L127.9995,956.2773 L117.9995,966.2773 L39.3931,966.2773" fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.6064" x="42.3931" y="961.2012">Presentation</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="226.7598" x="72.7515" y="983.2773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="206.7598" x="82.7515" y="1005.7344">Reports (report_*, research_report_v2)</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="273.4766" x="49.3931" y="1038.3711"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="253.4766" x="59.3931" y="1060.8281">Streamlit (read_api, ingest.get_provider_health)</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="124.0332" x="124.1147" y="1093.4648"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104.0332" x="134.1147" y="1115.9219">FastAPI (read-only)</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="187.3906" x="92.436" y="1197.4766"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44.0215" x="102.436" y="1219.9336">reportv2</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" text-decoration="line-through" textLength="46.0137" x="149.7915" y="1219.9336">regimes,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70.6875" x="199.1392" y="1219.9336">reality-check,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111.3926" x="102.436" y="1235.0273">--execution-evidence</text><rect fill="#F1F1F1" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="250.4609" x="60.9009" y="1267.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="230.4609" x="70.9009" y="1290.1211">Promotion workflow (candidate &#8594; evaluate)</text><rect fill="#F1F1F1" height="50.1875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="192.0664" x="90.0981" y="1322.7578"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172.0664" x="100.0981" y="1345.2148">Sweep registry (sweep_families,</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106.7344" x="100.0981" y="1360.3086">sweep_hypotheses)</text><polygon fill="#F1F1F1" points="141.7876,1148.5586,230.4751,1148.5586,242.4751,1160.5586,230.4751,1172.5586,141.7876,1172.5586,129.7876,1160.5586,141.7876,1148.5586" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="17.1177" x="190.1313" y="1183.9775">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88.6875" x="141.7876" y="1165.0596">Phase 3 enabled?</text><polygon fill="#F1F1F1" points="186.1313,1392.9453,198.1313,1404.9453,186.1313,1416.9453,174.1313,1404.9453,186.1313,1392.9453" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="115.3125" y2="135.3125"/><polygon fill="#181818" points="182.1313,125.3125,186.1313,135.3125,190.1313,125.3125,186.1313,129.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="170.4063" y2="190.4063"/><polygon fill="#181818" points="182.1313,180.4063,186.1313,190.4063,190.1313,180.4063,186.1313,184.4063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="225.5" y2="245.5"/><polygon fill="#181818" points="182.1313,235.5,186.1313,245.5,190.1313,235.5,186.1313,239.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="280.5938" y2="300.5938"/><polygon fill="#181818" points="182.1313,290.5938,186.1313,300.5938,190.1313,290.5938,186.1313,294.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="430.3906" y2="450.3906"/><polygon fill="#181818" points="182.1313,440.3906,186.1313,450.3906,190.1313,440.3906,186.1313,444.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="544.5781" y2="569.4961"/><polygon fill="#181818" points="182.1313,559.4961,186.1313,569.4961,190.1313,559.4961,186.1313,563.4961" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="242.4751" x2="300.3442" y1="532.5781" y2="532.5781"/><polygon fill="#181818" points="296.3442,584.5898,300.3442,594.5898,304.3442,584.5898,300.3442,588.5898" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="300.3442" x2="300.3442" y1="532.5781" y2="651.6836"/><line style="stroke:#181818;stroke-width:1;" x1="300.3442" x2="198.1313" y1="651.6836" y2="651.6836"/><polygon fill="#181818" points="208.1313,647.6836,198.1313,651.6836,208.1313,655.6836,204.1313,651.6836" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="619.6836" y2="639.6836"/><polygon fill="#181818" points="182.1313,629.6836,186.1313,639.6836,190.1313,629.6836,186.1313,633.6836" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="500.5781" y2="520.5781"/><polygon fill="#181818" points="182.1313,510.5781,186.1313,520.5781,190.1313,510.5781,186.1313,514.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="335.6875" y2="395.2969"/><polygon fill="#181818" points="182.1313,385.2969,186.1313,395.2969,190.1313,385.2969,186.1313,389.2969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="758.3867" y2="778.3867"/><polygon fill="#181818" points="182.1313,768.3867,186.1313,778.3867,190.1313,768.3867,186.1313,772.3867" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="813.4805" y2="833.4805"/><polygon fill="#181818" points="182.1313,823.4805,186.1313,833.4805,190.1313,823.4805,186.1313,827.4805" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="868.5742" y2="888.5742"/><polygon fill="#181818" points="182.1313,878.5742,186.1313,888.5742,190.1313,878.5742,186.1313,882.5742" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="663.6836" y2="723.293"/><polygon fill="#181818" points="182.1313,713.293,186.1313,723.293,190.1313,713.293,186.1313,717.293" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1018.3711" y2="1038.3711"/><polygon fill="#181818" points="182.1313,1028.3711,186.1313,1038.3711,190.1313,1028.3711,186.1313,1032.3711" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1073.4648" y2="1093.4648"/><polygon fill="#181818" points="182.1313,1083.4648,186.1313,1093.4648,190.1313,1083.4648,186.1313,1087.4648" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1247.6641" y2="1267.6641"/><polygon fill="#181818" points="182.1313,1257.6641,186.1313,1267.6641,190.1313,1257.6641,186.1313,1261.6641" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1302.7578" y2="1322.7578"/><polygon fill="#181818" points="182.1313,1312.7578,186.1313,1322.7578,190.1313,1312.7578,186.1313,1316.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1172.5586" y2="1197.4766"/><polygon fill="#181818" points="182.1313,1187.4766,186.1313,1197.4766,190.1313,1187.4766,186.1313,1191.4766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="242.4751" x2="321.3618" y1="1160.5586" y2="1160.5586"/><polygon fill="#181818" points="317.3618,1275.2109,321.3618,1285.2109,325.3618,1275.2109,321.3618,1279.2109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="321.3618" x2="321.3618" y1="1160.5586" y2="1404.9453"/><line style="stroke:#181818;stroke-width:1;" x1="321.3618" x2="198.1313" y1="1404.9453" y2="1404.9453"/><polygon fill="#181818" points="208.1313,1400.9453,198.1313,1404.9453,208.1313,1408.9453,204.1313,1404.9453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1372.9453" y2="1392.9453"/><polygon fill="#181818" points="182.1313,1382.9453,186.1313,1392.9453,190.1313,1382.9453,186.1313,1386.9453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="1128.5586" y2="1148.5586"/><polygon fill="#181818" points="182.1313,1138.5586,186.1313,1148.5586,190.1313,1138.5586,186.1313,1142.5586" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="186.1313" x2="186.1313" y1="923.668" y2="983.2773"/><polygon fill="#181818" points="182.1313,973.2773,186.1313,983.2773,190.1313,973.2773,186.1313,977.2773" style="stroke:#181818;stroke-width:1;"/><?plantuml-src ZLEzRjmm3Dxp54GcNtjkW7HBXg9j4213aKDlw590uDdqcJXPSYdvVXe4wDG7AFg4UP9Iik-GPEf6yUyZ-NsA72t1Wdkox0ZkjoHRfXqy_VeBjtuGM4PSKu2ti6Wn4Bo7-pwMxCxEUfJ8aRs3ypkdASayXuSpWAlAyaNlhOM2SmG-Bkx0EtkONQVmcg99OLDv5saVuUdt7v31cOxNWgbFWABoGegwlHnhbhsF2-6AFhV83YxWXlPBXtreVSokd7Mp-YOSINB7C8N377hnMwv9J4jeOvjp1yUwR223rlgTPHspEFgWypKfyEEBDR-WjcQq_1EVBVi91LO3stg2NQ44yz08_NZCE0rMqOlfJiK4nT6dADRevc7-tKs-5KNKYOK2rmDgbE8WBkGhS0F5aGPokB9KVvX1RCb1SQ0mqnG555fpHoy0yu57zuGslKBKh91wawkvURrmcayfd3QjCQ9UlY7KaLGJQkQPapNsovsk0gyTMbsY2cRAo7PUDsVuFdAdWyaSTcWtfl6oGwddG7kgXWIksWWnvzA-rpqwSZ5ab13by9gPXOwZ2Szf-Kgz5oqf91lcJRufeLIjcLmdRKKXx2p7b8ormPxdC2htNTRgI_MCHRSOOf9rBYbFulvVYj80sqieo-bmysmgM_5GLYrL6-MeB4_dA2bDu2gw7Xiin7S-xxxpicbKmFfZK2bKZaQwQOjsqCTigbZkYFhJ0Q48wQtqT6oPaY96HtlGZzRgeKR57LNn3m00?></g></svg>