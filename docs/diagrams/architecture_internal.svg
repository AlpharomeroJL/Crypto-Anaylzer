<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="765px" preserveAspectRatio="none" style="width:1782px;height:765px;background:#FFFFFF;" version="1.1" viewBox="0 0 1782 765" width="1782px" zoomAndPan="magnify"><title>Internal Architecture &#8212; Four Stages, One Database (a8e1eac)</title><defs/><g><g class="title" data-source-line="1"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="341.1953" x="713.4023" y="24.5332">Internal Architecture &#8212; Four Stages, One Database</text></g><!--cluster Ingestion\n(ingest API only for poll)--><g class="cluster" data-qualified-name="Ingestion.n.ingest API only for poll." data-source-line="5" id="ent0003"><path d="M1080.5,44.6094 L1243.2725,44.6094 A3.75,3.75 0 0 1 1245.7725,47.1094 L1252.7725,85.8281 L1443.5,85.8281 A2.5,2.5 0 0 1 1446,88.3281 L1446,469.3794 A2.5,2.5 0 0 1 1443.5,471.8794 L1080.5,471.8794 A2.5,2.5 0 0 1 1078,469.3794 L1078,47.1094 A2.5,2.5 0 0 1 1080.5,44.6094" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1078" x2="1252.7725" y1="85.8281" y2="85.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="62.2207" x="1131.7759" y="61.1426">Ingestion</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="161.7725" x="1082" y="78.752">(ingest API only for poll)</text></g><!--cluster Materialization--><g class="cluster" data-qualified-name="Materialization" data-source-line="17" id="ent0013"><path d="M8.5,363.4694 L106.7412,363.4694 A3.75,3.75 0 0 1 109.2412,365.9694 L116.2412,387.0787 L531.5,387.0787 A2.5,2.5 0 0 1 534,389.5787 L534,478.1794 A2.5,2.5 0 0 1 531.5,480.6794 L8.5,480.6794 A2.5,2.5 0 0 1 6,478.1794 L6,365.9694 A2.5,2.5 0 0 1 8.5,363.4694" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="116.2412" y1="387.0787" y2="387.0787"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="97.2412" x="10" y="380.0026">Materialization</text></g><!--cluster Modeling--><g class="cluster" data-qualified-name="Modeling" data-source-line="26" id="ent0020"><path d="M1472.5,363.4694 L1534.9346,363.4694 A3.75,3.75 0 0 1 1537.4346,365.9694 L1544.4346,387.0787 L1772.5,387.0787 A2.5,2.5 0 0 1 1775,389.5787 L1775,665.8194 A2.5,2.5 0 0 1 1772.5,668.3194 L1472.5,668.3194 A2.5,2.5 0 0 1 1470,665.8194 L1470,365.9694 A2.5,2.5 0 0 1 1472.5,363.4694" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1470" x2="1544.4346" y1="387.0787" y2="387.0787"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61.4346" x="1474" y="380.0026">Modeling</text></g><!--cluster Presentation--><g class="cluster" data-qualified-name="Presentation" data-source-line="35" id="ent0027"><path d="M560.5,354.6594 L646.2998,354.6594 A3.75,3.75 0 0 1 648.7998,357.1594 L655.7998,378.2687 L1051.5,378.2687 A2.5,2.5 0 0 1 1054,380.7687 L1054,486.9894 A2.5,2.5 0 0 1 1051.5,489.4894 L560.5,489.4894 A2.5,2.5 0 0 1 558,486.9894 L558,357.1594 A2.5,2.5 0 0 1 560.5,354.6594" fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="558" x2="655.7998" y1="378.2687" y2="378.2687"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84.7998" x="562" y="371.1926">Presentation</text></g><!--entity Poller--><g class="entity" data-qualified-name="Ingestion.n.ingest API only for poll..Poller" data-source-line="6" id="ent0004"><rect fill="#F1F1F1" height="82.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.5166" x="1192.74" y="98.6094"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1323.2566" y="103.6094"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1321.2566" y="105.6094"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1321.2566" y="109.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.1201" x="1207.74" y="133.1426">cli/poll &#8594; ingest</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.5166" x="1207.74" y="150.752">(get_poll_context,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95.7236" x="1207.74" y="168.3613">run_one_cycle)</text></g><!--entity SpotChain--><g class="entity" data-qualified-name="Ingestion.n.ingest API only for poll..SpotChain" data-source-line="7" id="ent0005"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172.6924" x="1093.65" y="242.4394"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1246.3424" y="247.4394"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1244.3424" y="249.4394"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1244.3424" y="253.4394"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.1582" x="1108.65" y="276.9726">Spot chain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.6924" x="1108.65" y="294.582">(Coinbase &#8594; Kraken)</text></g><!--entity DexChain--><g class="entity" data-qualified-name="Ingestion.n.ingest API only for poll..DexChain" data-source-line="8" id="ent0006"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128.6895" x="1301.66" y="242.4394"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1410.3495" y="247.4394"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1408.3495" y="249.4394"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1408.3495" y="253.4394"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.1445" x="1316.66" y="276.9726">DEX chain</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.6895" x="1316.66" y="294.582">(Dexscreener)</text></g><!--entity DbWriter--><g class="entity" data-qualified-name="Ingestion.n.ingest API only for poll..DbWriter" data-source-line="9" id="ent0007"><rect fill="#F1F1F1" height="47.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.2207" x="1132.39" y="408.2694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1207.6107" y="413.2694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1205.6107" y="415.2694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1205.6107" y="419.2694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.2207" x="1147.39" y="442.8026">DbWriter</text></g><!--entity BarBuilder--><g class="entity" data-qualified-name="Materialization.BarBuilder" data-source-line="18" id="ent0014"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.8203" x="22.09" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="119.9103" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="117.9103" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="117.9103" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.7031" x="37.09" y="434.0026">Bar builder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.8203" x="37.09" y="451.612">(bars_{freq})</text></g><!--entity FactorMat--><g class="entity" data-qualified-name="Materialization.FactorMat" data-source-line="19" id="ent0015"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.4893" x="174.76" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="305.2493" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="303.2493" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="303.2493" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.4893" x="189.76" y="434.0026">factor_materialize</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28.7861" x="189.76" y="451.612">(opt)</text></g><!--entity RegimeMat--><g class="entity" data-qualified-name="Materialization.RegimeMat" data-source-line="20" id="ent0016"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158.2686" x="359.87" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="498.1386" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="496.1386" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="496.1386" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118.2686" x="374.87" y="434.0026">regime_materialize</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.9375" x="374.87" y="451.612">(opt, Phase 3)</text></g><!--entity Model--><g class="entity" data-qualified-name="Modeling.Model" data-source-line="27" id="ent0021"><rect fill="#F1F1F1" height="82.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.4756" x="1550.26" y="569.4894"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1673.7356" y="574.4894"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1671.7356" y="576.4894"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1671.7356" y="580.4894"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.5029" x="1565.26" y="604.0226">data / features</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.4756" x="1565.26" y="621.632">factors / regimes</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5791" x="1565.26" y="639.2413">signals</text></g><!--entity Opt--><g class="entity" data-qualified-name="Modeling.Opt" data-source-line="28" id="ent0022"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.4756" x="1636.76" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1739.2356" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1737.2356" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1737.2356" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.793" x="1651.76" y="434.0026">optimizer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.4756" x="1651.76" y="451.612">walk_forward</text></g><!--entity Exp--><g class="entity" data-qualified-name="Modeling.Exp" data-source-line="29" id="ent0023"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.2549" x="1485.87" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1582.1249" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1580.1249" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1580.1249" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.2549" x="1500.87" y="434.0026">experiments</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45.8965" x="1500.87" y="451.612">registry</text></g><!--entity Reports--><g class="entity" data-qualified-name="Presentation.Reports" data-source-line="36" id="ent0028"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.8066" x="574.1" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="671.9066" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="669.9066" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="669.9066" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.0205" x="589.1" y="434.0026">Reports</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.8066" x="589.1" y="451.612">(report_*.py)</text></g><!--entity UI--><g class="entity" data-qualified-name="Presentation.UI" data-source-line="37" id="ent0029"><rect fill="#F1F1F1" height="82.8281" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172.3096" x="726.85" y="390.6594"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="879.1596" y="395.6594"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="877.1596" y="397.6594"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="877.1596" y="401.6594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.2344" x="741.85" y="425.1926">Streamlit</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.4648" x="741.85" y="442.802">(read_api + ingest</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.3096" x="741.85" y="460.4113">.get_provider_health)</text></g><!--entity API--><g class="entity" data-qualified-name="Presentation.API" data-source-line="38" id="ent0030"><rect fill="#F1F1F1" height="65.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.793" x="934.1" y="399.4694"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="1017.893" y="404.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1015.893" y="406.4694"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="1015.893" y="410.4694"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.793" x="949.1" y="434.0026">REST API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.1172" x="949.1" y="451.612">(FastAPI)</text></g><!--entity DB--><g class="entity" data-qualified-name="DB" data-source-line="3" id="ent0002"><path d="M701.25,588.7894 C701.25,578.7894 763.0015,578.7894 763.0015,578.7894 C763.0015,578.7894 824.7529,578.7894 824.7529,588.7894 L824.7529,633.0081 C824.7529,643.0081 763.0015,643.0081 763.0015,643.0081 C763.0015,643.0081 701.25,643.0081 701.25,633.0081 L701.25,588.7894" fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M701.25,588.7894 C701.25,598.7894 763.0015,598.7894 763.0015,598.7894 C763.0015,598.7894 824.7529,598.7894 824.7529,588.7894" fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.7998" x="711.25" y="617.3226">SQLite</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.5029" x="711.25" y="634.932">(dex_data.sqlite)</text></g><g class="entity" data-qualified-name="GMN39" data-source-line="51" id="ent0040"><path d="M664.69,715.3194 L664.69,758.0225 A0,0 0 0 0 664.69,758.0225 L861.317,758.0225 A0,0 0 0 0 861.317,758.0225 L861.317,725.3194 L851.317,715.3194 L767,715.3194 L763,643.4494 L759,715.3194 L664.69,715.3194 A0,0 0 0 0 664.69,715.3194" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M851.317,715.3194 L851.317,725.3194 L861.317,725.3194 L851.317,715.3194" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.458" x="670.69" y="733.8145">Single source of truth.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.627" x="670.69" y="750.1661">Stages can run independently.</text></g><!--link Poller to SpotChain--><g class="link" data-entity-1="ent0004" data-entity-2="ent0005" data-link-type="dependency" data-source-line="10" id="lnk8"><path d="M1241.12,181.6594 C1228.28,201.0694 1216.4504,218.9552 1204.4504,237.0952" fill="none" id="Poller-to-SpotChain" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1201.14,242.0994,1209.4416,236.8,1203.8986,237.9292,1202.7694,232.3862,1201.14,242.0994" style="stroke:#181818;stroke-width:1;"/></g><!--link Poller to DexChain--><g class="link" data-entity-1="ent0004" data-entity-2="ent0006" data-link-type="dependency" data-source-line="11" id="lnk9"><path d="M1297.94,181.6594 C1312.23,201.0694 1325.5419,219.1282 1338.9019,237.2682" fill="none" id="Poller-to-DexChain" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1342.46,242.0994,1340.3436,232.4806,1339.4949,238.0734,1333.9021,237.2247,1342.46,242.0994" style="stroke:#181818;stroke-width:1;"/></g><!--link SpotChain to DbWriter--><g class="link" data-entity-1="ent0005" data-entity-2="ent0007" data-link-type="dependency" data-source-line="12" id="lnk10"><path d="M1180,307.7994 C1180,337.5594 1180,375.3494 1180,401.9394" fill="none" id="SpotChain-to-DbWriter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1180,407.9394,1184,398.9394,1180,402.9394,1176,398.9394,1180,407.9394" style="stroke:#181818;stroke-width:1;"/></g><!--link DexChain to DbWriter--><g class="link" data-entity-1="ent0006" data-entity-2="ent0007" data-link-type="dependency" data-source-line="13" id="lnk11"><path d="M1327.91,307.7994 C1292.2,337.5594 1244.2689,377.5077 1212.3689,404.0977" fill="none" id="DexChain-to-DbWriter" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1207.76,407.9394,1217.2344,405.2494,1211.6007,404.738,1212.1122,399.1043,1207.76,407.9394" style="stroke:#181818;stroke-width:1;"/></g><!--link DbWriter to DB--><g class="link" data-entity-1="ent0007" data-entity-2="ent0002" data-link-type="dependency" data-source-line="14" id="lnk12"><path d="M1140.51,456.2794 C1100.27,479.3094 1035.63,514.6794 977,539.4894 C926.93,560.6794 873.9007,577.908 830.6207,590.788" fill="none" id="DbWriter-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="824.87,592.4994,834.6371,593.7661,829.6623,591.0732,832.3552,586.0984,824.87,592.4994" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.9326" x="1052.2659" y="519.9845">write snapshots,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.5044" x="1046.48" y="536.3361">spot prices, health</text></g><!--link BarBuilder to DB--><g class="link" data-entity-1="ent0014" data-entity-2="ent0002" data-link-type="dependency" data-source-line="21" id="lnk17"><path d="M81.92,464.6894 C84.43,489.0094 92.05,521.4094 114,539.4894 C158.78,576.3794 541.0975,598.9991 694.7775,606.6991" fill="none" id="BarBuilder-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="700.77,606.9994,691.9814,602.554,695.7763,606.7492,691.5811,610.544,700.77,606.9994" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.8926" x="115" y="519.9845">read snapshots</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.6372" x="125.1277" y="536.3361">write bars_*</text></g><!--link DB to BarBuilder--><g class="link" data-entity-1="ent0002" data-entity-2="ent0014" data-link-type="dependency" data-source-line="44" id="lnk34"><path d="M700.8,609.1094 C604.46,606.1394 414.58,593.2494 264,539.4894 C236.58,529.6994 235.35,515.4894 208,505.4894 C186.45,497.6094 177.86,507.0394 157,497.4894 C140.02,489.7094 128.2449,481.1033 115.2049,469.0433" fill="none" id="DB-to-BarBuilder" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="110.8,464.9694,114.6915,474.0168,114.4708,468.3643,120.1233,468.1436,110.8,464.9694" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59.2617" x="265" y="527.9845">snapshots</text></g><!--link FactorMat to DB--><g class="link" data-entity-1="ent0015" data-entity-2="ent0002" data-link-type="dependency" data-source-line="22" id="lnk18"><path d="M281.38,465.1594 C306.99,489.4094 345.32,521.4894 385,539.4894 C489.41,586.8494 617.8729,601.9661 695.0629,607.0361" fill="none" id="FactorMat-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="701.05,607.4294,692.3315,602.8481,696.0608,607.1017,691.8072,610.8309,701.05,607.4294" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.2808" x="386" y="519.9845">factor_model_runs,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.2153" x="395.0327" y="536.3361">residual_returns</text></g><!--link RegimeMat to DB--><g class="link" data-entity-1="ent0016" data-entity-2="ent0002" data-link-type="dependency" data-source-line="23" id="lnk19"><path d="M465.23,464.9694 C486.06,488.4694 517.06,519.6694 550,539.4894 C597.05,567.8094 651.0638,584.8559 695.3238,595.7459" fill="none" id="RegimeMat-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="701.15,597.1794,693.3663,591.1449,696.2948,595.9848,691.455,598.9132,701.15,597.1794" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.8672" x="553.8914" y="519.9845">regime_runs,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.6499" x="551" y="536.3361">regime_states</text></g><!--link Model to DB--><g class="link" data-entity-1="ent0021" data-entity-2="ent0002" data-link-type="dependency" data-source-line="30" id="lnk24"><path d="M1549.84,610.8994 C1384.45,610.8994 986.34,610.8994 831.12,610.8994" fill="none" id="Model-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="825.12,610.8994,834.12,614.8994,830.12,610.8994,834.12,606.8994,825.12,610.8994" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.7153" x="1144.51" y="604.3945">read bars, spot</text></g><!--link DB to Model--><g class="link" data-entity-1="ent0002" data-entity-2="ent0021" data-link-type="dependency" data-source-line="45" id="lnk35"><path d="M825.12,610.8994 C980.34,610.8994 1378.45,610.8994 1543.84,610.8994" fill="none" id="DB-to-Model" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1549.84,610.8994,1540.84,606.8994,1544.84,610.8994,1540.84,614.8994,1549.84,610.8994" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57.0845" x="1159.01" y="604.3945">bars, spot</text></g><!--link Opt to Model--><g class="link" data-entity-1="ent0022" data-entity-2="ent0021" data-link-type="dependency" data-source-line="31" id="lnk25"><path d="M1684.24,465.0994 C1671.7,494.2594 1655.4992,531.9569 1641.9092,563.5769" fill="none" id="Opt-to-Model" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="1639.54,569.0894,1646.7687,562.4002,1641.5143,564.4957,1639.4188,559.2413,1639.54,569.0894" style="stroke:#181818;stroke-width:1;"/></g><!--link Exp to DB--><g class="link" data-entity-1="ent0023" data-entity-2="ent0002" data-link-type="dependency" data-source-line="32" id="lnk26"><path d="M1503.67,465.0794 C1486.74,477.0094 1466.29,489.5594 1446,497.4894 C1228.56,582.3994 953.8549,602.9313 831.0849,608.0113" fill="none" id="Exp-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="825.09,608.2594,834.2477,611.8839,830.0857,608.0527,833.9169,603.8907,825.09,608.2594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.979" x="1412.12" y="527.9845">read/write runs</text></g><!--link Reports to DB--><g class="link" data-entity-1="ent0028" data-entity-2="ent0002" data-link-type="dependency" data-source-line="39" id="lnk31"><path d="M633.63,464.8994 C635.49,487.4594 640.93,517.5094 656,539.4894 C667.38,556.0894 679.019,566.5266 695.869,577.2566" fill="none" id="Reports-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="700.93,580.4794,695.4871,572.2712,696.7125,577.7937,691.19,579.0191,700.93,580.4794" style="stroke:#181818;stroke-width:1;"/></g><!--link DB to Reports--><g class="link" data-entity-1="ent0002" data-entity-2="ent0028" data-link-type="dependency" data-source-line="46" id="lnk36"><path d="M739.85,578.4194 C716.36,546.4594 683.7351,502.0727 660.0951,469.9327" fill="none" id="DB-to-Reports" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="656.54,465.0994,658.6504,474.7195,659.5026,469.1272,665.0949,469.9794,656.54,465.0994" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25.3018" x="710.64" y="527.9845">data</text></g><!--link UI to DB--><g class="link" data-entity-1="ent0029" data-entity-2="ent0002" data-link-type="dependency" data-source-line="40" id="lnk32"><path d="M806.28,473.9094 C802.56,493.8894 797.39,518.1594 791,539.4894 C787.11,552.4694 784.1008,560.8498 779.1608,572.8698" fill="none" id="UI-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="776.88,578.4194,784.0009,571.6155,778.7807,573.7947,776.6014,568.5745,776.88,578.4194" style="stroke:#181818;stroke-width:1;"/></g><!--link DB to UI--><g class="link" data-entity-1="ent0002" data-entity-2="ent0029" data-link-type="dependency" data-source-line="47" id="lnk37"><path d="M754.59,578.4394 C750.43,557.2594 747.85,529.0094 756,505.4894 C759.87,494.2994 762.7037,488.3544 769.8437,478.6944" fill="none" id="DB-to-UI" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="773.41,473.8694,764.8438,478.7294,770.438,477.8903,771.2772,483.4845,773.41,473.8694" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25.3018" x="757" y="527.9845">data</text></g><!--link API to DB--><g class="link" data-entity-1="ent0030" data-entity-2="ent0002" data-link-type="dependency" data-source-line="41" id="lnk33"><path d="M953.39,465.0294 C942.13,475.6594 929.25,487.3594 917,497.4894 C882.05,526.3794 845.3175,553.1117 814.1475,574.9017" fill="none" id="API-to-DB" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="809.23,578.3394,818.8981,576.4612,813.3279,575.4746,814.3145,569.9045,809.23,578.3394" style="stroke:#181818;stroke-width:1;"/></g><!--link DB to API--><g class="link" data-entity-1="ent0002" data-entity-2="ent0030" data-link-type="dependency" data-source-line="48" id="lnk38"><path d="M824.98,588.3994 C852.89,576.7494 885.08,560.4194 910,539.4894 C934.86,518.6094 952.6273,493.0265 966.1473,469.9465" fill="none" id="DB-to-API" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="969.18,464.7694,961.1795,470.5133,966.6527,469.0837,968.0824,474.5569,969.18,464.7694" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25.3018" x="942.75" y="527.9845">data</text></g><?plantuml-src RLJDRjim3BxxAOYSkYvD3xlbCA1fMY3OXcRDYkrGm51i9XOgIwwahCcA0Zlj0OOzOPzafEIVEEd5e4b-7wcFbBpq2c6cFLej55pOh90UCx-n2A-__y6rsLXOUB56DuGRZJ0LNYo5moJ9Qmi6Yw-V2NIlJtBSfkmUkKT5ddS340wcaoIfHFP0732OQMBoqcZAbi66Y_aCZ5OxM1aBbL6AOCy9G6RAocZK7WQPakSSWTS_Vo722Bz6dx8tpGprl_N3UsqtEYLCckqoLPUVKmRQFj-YCXwoGaXkuz987Sx1v9-iU40TaPnroKbzyFJgHukTujPb5b6ZhG-BsxSWo--MzB0nfVwXbDWRd9rzx1NRS-_njHanqB4qEKV-sep-2OpXYV_1QL6vmdX7WZbMeh8ou_aMA9GlafUzUNqHH225ahy4J-reCXDXORcHAaTBSYo5TUdpokBZIvI3mfCOxSDM8lF6fcNBpjjZAXzHro5AfViWYsjPuZ5e2FE2v_SXecz3MaHtzJiHB8gyq-1UHr52wwS4QOjtYAPRawDAQSLOE8jEvXj1_qYNHJj2jeNtQuMMMqpuSvvEuFeoCpKjzf6-V9lW75Oe-4fIjx4NHxx8HYudrtHtNJXy8EfJa4Ao9B5eG4z2FQHqpPw4pKFwJNMWCMuh4hSasyL-dRUxa7grhIWry1zeoT8DWJU94eWnX9j62DPFFuzwioGz2UPqF2hxzfhTOcKijtHYWvMUZgfTC-uGEhZWdagLz0O5XCXJKKbutpuTe_1qMFDJqcQaSUqZsztieF3LuXk_KCHpBPmdA-QH4IOUQjS79CVThBFvNQj_w9nqVlxPMyXnjuHDDAextbUqZZILni0RqNYfND_1DMjFeWsljV7Ub61MiQS5AK3llQDNFKFsUhlnnOWZuOs7J6WU3IcLOuNqqLxjHWbPm7p9Vm00?></g></svg>